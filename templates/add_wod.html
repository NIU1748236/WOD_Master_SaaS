<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AÃ±adir WOD - WOD Master PRO</title>
    
    <link rel="icon" href="{{ url_for('static', filename='favicon.ico') }}">
    
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}?v=13">
</head>
<body>
    <div class="container">
        
        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; border-bottom: 1px solid var(--border-color); padding-bottom: 10px;">
            <h1>
                {% if wod %}
                    ğŸ“‹ Clonar Entrenamiento
                {% else %}
                    â• Nuevo Entrenamiento
                {% endif %}
            </h1>
            <button id="theme-toggle" class="theme-toggle">ğŸŒ</button>
        </div>
        
        <form method="POST" action="{{ url_for('add_wod') }}">
            <div style="display: flex; gap: 20px;">
                <div style="flex:1;">
                    <label>Fecha:</label>
                    <input type="date" name="date" value="{{ today_date }}" required>
                </div>
                <div style="flex:1;">
                    <label>ğŸ·ï¸ CategorÃ­a:</label>
                    <select name="category">
                        <option value="Strength" {% if wod and wod.category == 'Strength' %}selected{% endif %}>ğŸ”´ Fuerza / Powerlifting</option>
                        <option value="Hypertrophy" {% if wod and wod.category == 'Hypertrophy' %}selected{% endif %}>ğŸŸ  Hipertrofia / Bodybuilding</option>
                        <option value="Metcon" {% if wod and wod.category == 'Metcon' %}selected{% endif %}>ğŸŸ£ Metcon / WOD</option>
                        <option value="Cardio" {% if wod and wod.category == 'Cardio' %}selected{% endif %}>ğŸ”µ Endurance / Cardio</option>
                        <option value="Gymnastics" {% if wod and wod.category == 'Gymnastics' %}selected{% endif %}>ğŸŸ¢ GimnÃ¡sticos</option>
                        <option value="Benchmark" {% if wod and wod.category == 'Benchmark' %}selected{% endif %}>ğŸŸ¡ Benchmark (Hero WOD)</option>
                        <option value="General" {% if wod and wod.category == 'General' %}selected{% endif %}>âšª General</option>
                    </select>
                </div>
            </div>

            <div style="display: flex; gap: 20px;">
                <div style="flex:1;">
                    <label>ğŸ­ Tono de la IA:</label>
                    <select name="tone">
                        <option value="Motivador y Ã‰pico" {% if wod and wod.tone == 'Motivador y Ã‰pico' %}selected{% endif %}>ğŸ”¥ Motivador / Ã‰pico</option>
                        <option value="TÃ©cnico y Profesional" {% if wod and wod.tone == 'TÃ©cnico y Profesional' %}selected{% endif %}>ğŸ¤“ TÃ©cnico / Profesional</option>
                        <option value="Divertido y Comunitario" {% if wod and wod.tone == 'Divertido y Comunitario' %}selected{% endif %}>ğŸ¤ Divertido / Comunidad</option>
                        <option value="Agresivo y Militar" {% if wod and wod.tone == 'Agresivo y Militar' %}selected{% endif %}>ğŸª– Agresivo / Militar</option>
                    </select>
                </div>
                <div style="flex:1;">
                    <label>ğŸ¯ PÃºblico Objetivo:</label>
                    <select name="target_audience">
                        <option value="General" {% if wod and wod.target_audience == 'General' %}selected{% endif %}>ğŸ‘¥ Socios Generales</option>
                        <option value="Competidores" {% if wod and wod.target_audience == 'Competidores' %}selected{% endif %}>ğŸ† Competidores / Avanzados</option>
                        <option value="Principiantes" {% if wod and wod.target_audience == 'Principiantes' %}selected{% endif %}>ğŸŒ± Principiantes / On Ramp</option>
                        <option value="Masters" {% if wod and wod.target_audience == 'Masters' %}selected{% endif %}>ğŸ‘´ Masters (+40)</option>
                    </select>
                </div>
            </div>

            <label>TÃ­tulo:</label>
            <input type="text" name="title" placeholder="Ej: Murph, Fran, Heavy Day..." 
                   value="{{ (wod.title + ' (Copia)') if wod else '' }}" required>

            <label>Estructura del WOD:</label>
            <textarea name="structure" rows="5" placeholder="Ej: 5 Rondas de: 400m Run, 15 Thrusters..." required>{{ wod.structure if wod else '' }}</textarea>

            <label>Objetivo del EstÃ­mulo:</label>
            <input type="text" name="objective" placeholder="Ej: Mejorar capacidad aerÃ³bica, fatiga muscular media..."
                   value="{{ wod.objective if wod else '' }}">

            <label>Notas adicionales:</label>
            <textarea name="notes" rows="2" placeholder="Notas sobre material, logÃ­stica, etc.">{{ wod.notes if wod else '' }}</textarea>

            <br><br>
            <button type="submit" class="button primary">Guardar WOD</button>
            <a href="{{ url_for('index') }}" class="button secondary">Cancelar</a>
        </form>
    </div>

    <script>
        const btnTheme = document.getElementById('theme-toggle');
        const body = document.body;
        
        // FunciÃ³n para aplicar el tema guardado al cargar
        if (localStorage.getItem('theme') === 'light') { 
            body.classList.add('light-mode'); 
            if(btnTheme) btnTheme.innerText = 'ğŸŒ™'; 
        } else { 
            if(btnTheme) btnTheme.innerText = 'ğŸŒ'; 
        }

        function toggleTheme() {
            body.classList.toggle('light-mode');
            localStorage.setItem('theme', body.classList.contains('light-mode') ? 'light' : 'dark');
            btnTheme.innerText = body.classList.contains('light-mode') ? 'ğŸŒ™' : 'ğŸŒ';
        }
        if (btnTheme) btnTheme.addEventListener('click', toggleTheme);
    </script>
</body>
</html>
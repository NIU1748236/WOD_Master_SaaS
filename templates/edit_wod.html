<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Editar WOD - WOD Master PRO</title>
    
    <link rel="icon" href="{{ url_for('static', filename='favicon.ico') }}">
    
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}?v=16">
</head>
<body>
    <div class="container">
        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; border-bottom: 1px solid var(--border-color); padding-bottom: 10px;">
            <h1>âœï¸ Editar Entrenamiento</h1>
            <button id="theme-toggle" class="theme-toggle">ğŸŒ</button>
        </div>
        
        <form method="POST">
            <div class="row-responsive">
                <div style="flex:1;">
                    <label>Fecha:</label>
                    <input type="date" name="date" value="{{ wod_date_str }}" required>
                </div>
                <div style="flex:1;">
                    <label>ğŸ·ï¸ CategorÃ­a:</label>
                    <select name="category">
                        <option value="Strength" {% if wod.category == 'Strength' %}selected{% endif %}>ğŸ”´ Fuerza / Powerlifting</option>
                        <option value="Hypertrophy" {% if wod.category == 'Hypertrophy' %}selected{% endif %}>ğŸŸ  Hipertrofia / Bodybuilding</option>
                        <option value="Metcon" {% if wod.category == 'Metcon' %}selected{% endif %}>ğŸŸ£ Metcon / WOD</option>
                        <option value="Cardio" {% if wod.category == 'Cardio' %}selected{% endif %}>ğŸ”µ Endurance / Cardio</option>
                        <option value="Gymnastics" {% if wod.category == 'Gymnastics' %}selected{% endif %}>ğŸŸ¢ GimnÃ¡sticos</option>
                        <option value="Benchmark" {% if wod.category == 'Benchmark' %}selected{% endif %}>ğŸŸ¡ Benchmark (Hero WOD)</option>
                        <option value="General" {% if wod.category == 'General' %}selected{% endif %}>âšª General</option>
                    </select>
                </div>
            </div>

            <div class="row-responsive">
                <div style="flex:1;">
                    <label>ğŸ­ Tono de la IA:</label>
                    <select name="tone">
                        <option value="Motivador y Ã‰pico" {% if wod.tone == 'Motivador y Ã‰pico' %}selected{% endif %}>ğŸ”¥ Motivador / Ã‰pico</option>
                        <option value="TÃ©cnico y Profesional" {% if wod.tone == 'TÃ©cnico y Profesional' %}selected{% endif %}>ğŸ¤“ TÃ©cnico / Profesional</option>
                        <option value="Divertido y Comunitario" {% if wod.tone == 'Divertido y Comunitario' %}selected{% endif %}>ğŸ¤ Divertido / Comunidad</option>
                        <option value="Agresivo y Militar" {% if wod.tone == 'Agresivo y Militar' %}selected{% endif %}>ğŸª– Agresivo / Militar</option>
                    </select>
                </div>
                <div style="flex:1;">
                    <label>ğŸ¯ PÃºblico Objetivo:</label>
                    <select name="target_audience">
                        <option value="General" {% if wod.target_audience == 'General' %}selected{% endif %}>ğŸ‘¥ Socios Generales</option>
                        <option value="Competidores" {% if wod.target_audience == 'Competidores' %}selected{% endif %}>ğŸ† Competidores</option>
                        <option value="Principiantes" {% if wod.target_audience == 'Principiantes' %}selected{% endif %}>ğŸŒ± Principiantes</option>
                        <option value="Masters" {% if wod.target_audience == 'Masters' %}selected{% endif %}>ğŸ‘´ Masters (+40)</option>
                    </select>
                </div>
            </div>

            <label>TÃ­tulo:</label>
            <input type="text" name="title" value="{{ wod.title }}" required>

            <label>Estructura:</label>
            <textarea name="structure" rows="5" required>{{ wod.structure }}</textarea>

            <label>Objetivo:</label>
            <input type="text" name="objective" value="{{ wod.objective }}">

            <label>Notas:</label>
            <textarea name="notes" rows="2">{{ wod.notes }}</textarea>

            <br><br>
            <button type="submit" class="button primary">Guardar Cambios</button>
            <a href="{{ url_for('index') }}" class="button secondary">Cancelar</a>
        </form>
    </div>

    <script>
        const btnTheme = document.getElementById('theme-toggle');
        const body = document.body;
        
        // FunciÃ³n para aplicar el tema guardado al cargar
        if (localStorage.getItem('theme') === 'light') { 
            body.classList.add('light-mode'); 
            if(btnTheme) btnTheme.innerText = 'ğŸŒ™'; 
        } else { 
            if(btnTheme) btnTheme.innerText = 'ğŸŒ'; 
        }

        function toggleTheme() {
            body.classList.toggle('light-mode');
            localStorage.setItem('theme', body.classList.contains('light-mode') ? 'light' : 'dark');
            btnTheme.innerText = body.classList.contains('light-mode') ? 'ğŸŒ™' : 'ğŸŒ';
        }
        if (btnTheme) btnTheme.addEventListener('click', toggleTheme);
    </script>
</body>
</html>
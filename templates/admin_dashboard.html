<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Panel Super Admin</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body>
    <div class="container" style="max-width: 1200px;">
        <h1>üëë Panel de Control - WOD Master</h1>
        
        <div style="display: flex; justify-content: space-around; gap: 20px; margin-bottom: 30px; text-align: center;">
            <div style="background: #2c2c2c; padding: 20px; border-radius: 8px; flex: 1; border-left: 5px solid #00e676;">
                <h3>Total Usuarios Registrados</h3>
                <h2 style="color: #00e676; font-size: 3.5em; margin: 5px 0;">{{ total }}</h2>
            </div>
            <div style="background: #2c2c2c; padding: 20px; border-radius: 8px; flex: 1; border-left: 5px solid gold;">
                <h3>Usuarios PREMIUM</h3>
                <h2 style="color: gold; font-size: 3.5em; margin: 5px 0;">{{ premium }}</h2>
            </div>
        </div>

        <h2 style="border-bottom: 1px solid var(--border-color); padding-bottom: 10px; margin-top: 50px;">Detalle de Usuarios</h2>

        <table style="width: 100%; border-collapse: collapse; color: var(--text-main); font-size: 0.9em;">
            <thead>
                <tr style="background: #333;">
                    <th style="padding: 10px; text-align: left;">ID</th>
                    <th style="padding: 10px; text-align: left;">Email</th>
                    <th style="padding: 10px; text-align: left;">Gimnasio</th>
                    <th style="padding: 10px; text-align: center;">Plan</th>
                    <th style="padding: 10px; text-align: center;">Usos IA</th>
                    <th style="padding: 10px; text-align: left; font-size: 0.8em;">Stripe ID</th>
                </tr>
            </thead>
            <tbody>
                {% for u in users %}
                <tr style="border-bottom: 1px solid #444;">
                    <td style="padding: 10px; text-align: left;">{{ u.id }}</td>
                    <td style="padding: 10px; text-align: left;">{{ u.email }}</td>
                    <td style="padding: 10px; text-align: left;">{{ u.gym_name }}</td>
                    <td style="padding: 10px; text-align: center;">
                        {% if u.is_premium %}<span style="color: gold;">PRO</span>{% else %}<span style="color: #00e676;">FREE</span>{% endif %}
                    </td>
                    <td style="padding: 10px; text-align: center; font-weight: bold; color: #2979ff;">
                        {{ u.ai_uses_count if u.ai_uses_count is not none else 0 }}
                    </td>
                    <td style="padding: 10px; font-size: 0.8em; color: #888;">{{ u.stripe_customer_id if u.stripe_customer_id else 'N/A' }}</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
        <br>
        <a href="{{ url_for('index') }}" class="button secondary">‚Üê Volver a la App</a>
    </div>
</body>
</html>